From 9f227a4afff43dba771b5a812b83ae1062af1bdf Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Jan=20Jan=C3=9Fen?= <janssen@mpie.de>
Date: Wed, 14 Dec 2022 22:41:55 -0700
Subject: [PATCH] Fix the flexible master

---
 pyiron_base/jobs/master/flexible.py | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/pyiron_base/jobs/master/flexible.py b/pyiron_base/jobs/master/flexible.py
index 93e3a4430..0f122e083 100644
--- a/pyiron_base/jobs/master/flexible.py
+++ b/pyiron_base/jobs/master/flexible.py
@@ -88,7 +88,9 @@ def run_static(self):
                 job = self.pop(0)
                 job._master_id = self.job_id
                 if ind != 0:
-                    prev_job = self[ind - 1]
+                    prev_job = self[
+                        self.project.db.get_item_by_id(self.child_ids[-1])["job"]
+                    ]
                     if ind < max_steps:
                         mod_funct = self._step_function_lst[ind - 1]
                         mod_funct(prev_job, job)
